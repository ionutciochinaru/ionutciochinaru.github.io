<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kindle Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.3.4/vue.global.prod.min.js"></script>
    <style>
        :root {
            --black: #000000;
            --white: #ffffff;
            --gray: #888888;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--white);
            color: var(--black);
            min-height: 100vh;
        }

        .app {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            padding: 1rem;
            border-bottom: 1px dotted var(--black);
            display: flex;
            justify-content: space-between;
        }

        .main-content {
            flex: 1;
            position: relative;
            overflow: hidden;
        }

        .page {
            position: absolute;
            width: 100%;
            height: 100%;
            transition: transform 0.3s ease;
            padding: 1rem;
        }

        .nav {
            padding: 1rem;
            border-top: 1px dotted var(--black);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-dots {
            display: flex;
            gap: 0.5rem;
        }

        .nav-dot {
            width: 8px;
            height: 8px;
            border: 1px solid var(--black);
            border-radius: 50%;
        }

        .nav-dot.active {
            background: var(--black);
        }

        /* Weather Page */
        .weather-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        .weather-main {
            font-size: 4rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .weather-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.5rem;
        }

        .weather-item {
            border: 1px solid var(--black);
            padding: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Todo Page */
        .todo-list {
            max-width: 600px;
            margin: 0 auto;
        }

        .todo-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .todo-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem;
            border-bottom: 1px solid var(--gray);
        }

        /* Stats Page */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        .stat-card {
            border: 1px solid var(--black);
            padding: 1rem;
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            margin: 0.5rem 0;
        }

        button {
            background: var(--black);
            color: var(--white);
            border: none;
            padding: 0.5rem 1rem;
            cursor: pointer;
        }

        input[type="checkbox"] {
            width: 20px;
            height: 20px;
        }
    </style>
</head>
<body>
<div id="app" class="app">
    <!-- Header Component -->
    <header class="header">
        <div>{{ currentTime }}</div>
        <div>100%</div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Weather Page -->
        <div class="page" :style="{ transform: `translateX(${currentPage * -100}%)` }" v-show="currentPage === 0">
            <div class="weather-grid">
                <div class="weather-main">
                    <div>{{ weather.temperature }}¬∞C</div>
                    <div>‚òÄÔ∏è</div>
                </div>
                <div class="weather-details">
                    <div class="weather-item">
                        <span>üí®</span>
                        <span>Wind: {{ weather.windSpeed }} km/h</span>
                    </div>
                    <div class="weather-item">
                        <span>üíß</span>
                        <span>Humidity: {{ weather.humidity }}%</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Todo Page -->
        <div class="page" :style="{ transform: `translateX(${(currentPage - 1) * -100}%)` }" v-show="currentPage === 1">
            <div class="todo-list">
                <div class="todo-header">
                    <h2>Tasks</h2>
                    <button @click="addTodo">+ Add Task</button>
                </div>
                <div class="todo-items">
                    <div v-for="(todo, index) in todos" :key="index" class="todo-item">
                        <input type="checkbox" v-model="todo.completed">
                        <span :style="{ textDecoration: todo.completed ? 'line-through' : 'none' }">
                                {{ todo.text }}
                            </span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stats Page -->
        <div class="page" :style="{ transform: `translateX(${(currentPage - 2) * -100}%)` }" v-show="currentPage === 2">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">{{ pomodoroTime }}</div>
                    <div>Pomodoro Timer</div>
                    <button @click="togglePomodoro">
                        {{ isPomodoreActive ? 'Pause' : 'Start' }}
                    </button>
                </div>
                <div class="stat-card">
                    <div class="stat-number">{{ completedTodos }}</div>
                    <div>Tasks Completed</div>
                </div>
            </div>
        </div>
    </main>

    <!-- Navigation -->
    <nav class="nav">
        <button @click="prevPage">‚Üê</button>
        <div class="nav-dots">
            <div v-for="n in 3" :key="n"
                 :class="['nav-dot', { active: currentPage === n - 1 }]">
            </div>
        </div>
        <button @click="nextPage">‚Üí</button>
    </nav>
</div>

<script>
    const { createApp, ref, computed, onMounted } = Vue

    createApp({
        setup() {
            const currentPage = ref(0)
            const currentTime = ref('')
            const todos = ref(JSON.parse(localStorage.getItem('todos') || '[]'))
            const weather = ref({
                temperature: 0,
                windSpeed: 0,
                humidity: 0
            })
            const pomodoroTime = ref('25:00')
            const isPomodoreActive = ref(false)
            let pomodoroInterval = null
            let pomodoroSeconds = 25 * 60

            // Navigation
            const nextPage = () => {
                currentPage.value = (currentPage.value + 1) % 3
            }

            const prevPage = () => {
                currentPage.value = (currentPage.value - 1 + 3) % 3
            }

            // Weather
            const fetchWeather = async () => {
                try {
                    const response = await fetch(
                        "https://api.open-meteo.com/v1/forecast?latitude=52.52&longitude=13.41&current=temperature_2m,wind_speed_10m&hourly=temperature_2m,relative_humidity_2m,wind_speed_10m"
                    )
                    const data = await response.json()

                    weather.value = {
                        temperature: Math.round(data.current.temperature_2m),
                        windSpeed: Math.round(data.current.wind_speed_10m),
                        humidity: data.hourly.relative_humidity_2m[0]
                    }
                } catch (error) {
                    console.error('Error fetching weather:', error)
                }
            }

            // Todos
            const addTodo = () => {
                const text = prompt('New task:')
                if (text) {
                    todos.value.push({ text, completed: false })
                    saveTodos()
                }
            }

            const saveTodos = () => {
                localStorage.setItem('todos', JSON.stringify(todos.value))
            }

            const completedTodos = computed(() =>
                todos.value.filter(todo => todo.completed).length
            )

            // Pomodoro
            const togglePomodoro = () => {
                if (isPomodoreActive.value) {
                    clearInterval(pomodoroInterval)
                } else {
                    pomodoroInterval = setInterval(() => {
                        pomodoroSeconds--
                        const minutes = Math.floor(pomodoroSeconds / 60)
                        const seconds = pomodoroSeconds % 60
                        pomodoroTime.value = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`

                        if (pomodoroSeconds <= 0) {
                            clearInterval(pomodoroInterval)
                            isPomodoreActive.value = false
                            pomodoroSeconds = 25 * 60
                            pomodoroTime.value = '25:00'
                            alert('Pomodoro completed!')
                        }
                    }, 1000)
                }
                isPomodoreActive.value = !isPomodoreActive.value
            }

            // Clock
            const updateTime = () => {
                currentTime.value = new Date().toLocaleTimeString('en-US', { hour12: false })
            }

            // Initialize
            onMounted(() => {
                fetchWeather()
                setInterval(fetchWeather, 30 * 60 * 1000)
                updateTime()
                setInterval(updateTime, 1000)
            })

            return {
                currentPage,
                currentTime,
                weather,
                todos,
                pomodoroTime,
                isPomodoreActive,
                completedTodos,
                nextPage,
                prevPage,
                addTodo,
                togglePomodoro
            }
        }
    }).mount('#app')
</script>
</body>
</html>